# 加密算法介绍

加密算法是计算机科学中重要的一部分，它用于保护数据免受未经授权的访问、篡改和破坏。加密算法是一种将明文（原始数据）转换为密文（加密后的数据）的过程，以保护数据免受未经授权的访问。加密算法通常分为对称加密和非对称加密两种类型。

1. 对称加密：对称加密算法使用相同的密钥进行加密和解密。


2. 非对称加密：非对称加密算法使用一对密钥，公钥用于加密数据，私钥用于解密数据。公钥和私钥通常被保存在加密系统中，只有持有私钥的用户才能解密数据。


## 填充

在加密过程中，填充（Padding）是为了确保明文数据的长度符合加密算法的块大小要求。不同的填充方式适用于不同的场景. 

### 1. **PKCS#7 填充**
这是最常见的填充方式之一，适用于大多数分组加密模式（如 CBC、ECB）。PKCS#7 填充会在数据的末尾添加一个或多个字节，每个字节的值表示需要添加的填充值的个数。

- **示例**：
  - 如果块大小为 8 字节，数据长度为 9 字节，则需要填充 7 个字节，填充值为 `07 07 07 07 07 07 07`。
  - 如果数据正好是块大小的整数倍，则会填充一个完整块，每个字节的值等于块大小。例如，如果数据长度为 16 字节（块大小为 8 字节），则填充 `08 08 08 08 08 08 08 08`。

### 2. **ANSI X.923 填充**
这种填充方式与 PKCS#7 类似，但不同的是填充字节除了最后一个字节，其他填充字节都是 `00`，最后一个字节表示填充的字节数。

- **示例**：
  - 如果块大小为 8 字节，数据长度为 9 字节，则填充 `00 00 00 00 00 00 00 07`。
  - 如果数据正好是块大小的整数倍，则填充 `00 00 00 00 00 00 00 08`。

### 3. **ISO/IEC 7816-4 填充**
ISO/IEC 7816-4 填充在数据的末尾添加一个 `0x80`，后面填充 `00` 直到数据长度符合块大小要求。

- **示例**：
  - 如果块大小为 8 字节，数据长度为 9 字节，则填充 `80 00 00 00 00 00 00 00`。
  - 如果数据正好是块大小的整数倍，则需要添加一个完整块 `80 00 00 00 00 00 00 00`。

### 4. **Zero Padding（零填充）**
这种填充方式在数据的末尾添加 `00`，直到数据长度符合块大小要求。零填充只适用于明文数据长度不是块大小倍数的情况，如果数据长度刚好是块大小的倍数，零填充无法区分填充字节和真实数据，因此使用时需谨慎。

- **示例**：
  - 如果块大小为 8 字节，数据长度为 9 字节，则填充 `00 00 00 00 00 00 00 00`。

### 5. **ISO 10126 填充**
ISO 10126 填充与 ANSI X.923 填充类似，填充字节除了最后一个字节，其他填充字节为随机值，最后一个字节表示填充的字节数。

- **示例**：
  - 如果块大小为 8 字节，数据长度为 9 字节，则填充 `5F 3C 7A 6E B2 91 D4 07`（假设随机值为前 7 个字节）。

### 6. **No Padding（不填充）**
在某些情况下，数据长度恰好是块大小的整数倍时，可以选择不进行填充。这种方式通常用于流加密算法或者处理数据块大小的算法中。

### 7. **自定义填充**
在某些特殊情况下，你可能需要定义自己的填充方式，具体逻辑由加密算法使用方决定。需要确保解密过程可以正确识别和去除填充。

## 加密模式
加密模式（Cipher Mode）是分组加密算法用于处理超过单个数据块的数据的方法。不同的加密模式对数据安全性和处理方式有不同的影响。以下是几种常见的加密模式：

### 1. **ECB（Electronic Codebook）模式**
ECB 是最简单的加密模式，每个块独立地加密。如果相同的明文块在不同位置出现，ECB 模式将生成相同的密文块。

- **特点**：
  - 简单且易于实现。
  - 不提供数据混淆或掩盖相似性，因此不推荐用于加密超过一个数据块的数据。
  - 如果明文具有相同的模式，密文将保留这些模式，容易遭受模式识别攻击。

- **用途**：由于其弱点，ECB 通常只在非常特定的情况下使用，如加密小的数据块或固定长度的数据（例如密钥）。

### 2. **CBC（Cipher Block Chaining）模式**
CBC 模式将每个明文块与前一个密文块进行异或运算，然后再加密。第一个块使用初始化向量（IV）。

- **特点**：
  - 提供数据混淆效果，不同的相同明文块在不同的位置会生成不同的密文块。
  - 需要一个唯一的 IV 来确保安全性，但 IV 不需要保密。
  - 密文具有良好的随机性和安全性，广泛应用于多种场景。

- **用途**：适合加密需要保密性和随机性的文件、消息或数据流。

### 3. **CFB（Cipher Feedback）模式**
CFB 是一种将分组加密转换为流加密的模式。明文分成小段（通常是位或字节），然后加密器的输出与明文段进行异或运算来生成密文段。

- **特点**：
  - 可以处理任意长度的数据流，适用于实时数据处理。
  - 需要一个唯一的 IV。
  - 数据出错时会扩散到后续的密文中，但影响范围有限。

- **用途**：适合加密需要流式处理的数据，如网络通信或数据流。

### 4. **OFB（Output Feedback）模式**
OFB 也是一种将分组加密转换为流加密的模式。与 CFB 不同，OFB 模式的加密器输出仅依赖于 IV 和前一块加密器输出，而与明文无关。

- **特点**：
  - 不会传播解密错误，一个密文位错误只会影响相应的明文位。
  - 与 CFB 类似，需要一个唯一的 IV。
  - 适合硬件实现，可以提前计算加密序列。

- **用途**：用于需要高可靠性的通信中，适合对数据流进行加密。

### 5. **CTR（Counter）模式**
CTR 模式将分组加密算法转换为流加密算法。它将一个计数器与 nonce（一次性数值）组合，使用加密器生成加密流，然后将其与明文进行异或运算。

- **特点**：
  - 允许并行加密和解密，性能优越。
  - 不需要填充，适用于任意长度的数据。
  - 计数器值必须唯一，以确保安全性。

- **用途**：广泛应用于多种场景，包括硬件实现和高性能应用，适用于加密文件、磁盘块、网络数据包等。

### 6. **GCM（Galois/Counter Mode）模式**
GCM 是一种基于 CTR 的加密模式，并结合了消息认证码（MAC）功能，提供了加密和认证的双重功能。

- **特点**：
  - 提供数据保密性和认证性（即抗篡改性）。
  - 能够并行处理，加密性能非常高。
  - 需要一个唯一的 nonce 来确保安全性。

- **用途**：广泛应用于现代网络协议（如 TLS）和加密通信中，尤其是在需要认证和加密的场景下。

### 7. **其他模式**
- **PCBC（Propagating Cipher Block Chaining）模式**：是 CBC 的一种变体，但不常用。
- **XTS 模式**：主要用于加密磁盘块等应用场景，能够处理数据块重排等问题。

